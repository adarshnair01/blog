<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> WhatsApp Chatbot using LLMs | Adarsh Nair </title> <meta name="author" content="Adarsh Nair"> <meta name="description" content="AI-driven customer support chatbot integrated with WhatsApp using Large Language Models."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' data: https:; media-src 'self' https:; frame-src 'self' https:; connect-src 'self' https:;"> <link rel="stylesheet" href="/blog/assets/css/bootstrap.min.css?v=a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/blog/assets/css/academicons.min.css?v=f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/blog/assets/css/scholar-icons.css?v=62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/blog/assets/css/jekyll-pygments-themes-github.css?v=591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/blog/assets/css/main.css?v=d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://adarshnair.online/blog/blog/projects/2_whatsapp_chatbot/"> <script src="/blog/assets/js/theme.js?v=5fea5159b787642c1bbc1f334d60f883"></script> <link defer rel="stylesheet" href="/blog/assets/css/jekyll-pygments-themes-native.css?v=5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="https://adarshnair.online" rel="external nofollow noopener" target="_blank"> Adarsh Nair </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/blog/"> </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/index.html">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/cv/">CV </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="https://adarshnair.online/books/" rel="external nofollow noopener" target="_blank">books </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="fa-solid fa-magnifying-glass"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-half-sun-moon" id="light-toggle-system"></i> <i class="fa-solid fa-moon" id="light-toggle-dark"></i> <i class="fa-solid fa-sun" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">WhatsApp Chatbot using LLMs</h1> <p class="post-description">AI-driven customer support chatbot integrated with WhatsApp using Large Language Models.</p> </header> <article> <h1 id="enterprise-whatsapp-chatbot-with-rag-and-llms">Enterprise WhatsApp Chatbot with RAG and LLMs</h1> <h2 id="executive-summary">Executive Summary</h2> <p>Customer expectations for instant, accurate support are at an all-time high. To meet this demand, we developed an intelligent WhatsApp chatbot capable of handling complex customer queries autonomously. By integrating Large Language Models (LLMs) with a Retrieval-Augmented Generation (RAG) architecture, the bot can access up-to-date company policies, product manuals, and user data to provide personalized and accurate responses, deflecting over 60% of routine tickets from human agents.</p> <h2 id="problem-statement">Problem Statement</h2> <p>Our previous rule-based chatbot was rigid and frustrating for users. It could only handle exact keyword matches and frequently trapped users in loops (“I typically reply in 5 minutes”). Humans agents were overwhelmed with repetitive queries about order status, return policies, and product details. We needed a solution that could understand natural language, maintain context over a conversation, and fetch real-time data.</p> <h2 id="methodology">Methodology</h2> <h3 id="1-architecture-rag-pipeline">1. Architecture: RAG Pipeline</h3> <ul> <li> <strong>Vector Database</strong>: We used Weaviate to index over 5,000 pages of internal documentation, FAQs, and product manuals.</li> <li> <strong>Embeddings</strong>: Utilized OpenAI’s <code class="language-plaintext highlighter-rouge">text-embedding-3-small</code> for high-quality, cost-effective semantic search.</li> <li> <strong>Retrieval</strong>: Implementation of a hybrid search strategy (Sparse BM25 + Dense Semantic Vector) to ensure keywords (like specific error codes) and semantic concepts were both captured.</li> </ul> <h3 id="2-llm-integration">2. LLM Integration</h3> <ul> <li> <strong>Orchestration</strong>: Built using <strong>LangChain</strong> to manage the conversation flow, memory, and tool usage.</li> <li> <strong>Model</strong>: GPT-4-Turbo was used for the reasoning engine due to its superior instruction following and reduced hallucination rates compared to smaller models.</li> <li> <strong>Tools</strong>: The LLM was equipped with “tools” (function calling) to: <ul> <li>Check Order Status (API call to Shopify/OMS)</li> <li>Validate User Identity (OTP flow)</li> <li>Escalate to Human (Intercom API integration)</li> </ul> </li> </ul> <h3 id="3-whatsapp-integration">3. WhatsApp Integration</h3> <ul> <li> <strong>BSP</strong>: Utilized Twilio as the Business Service Provider (BSP) for the WhatsApp Business API.</li> <li> <strong>Webhook Handler</strong>: Developed a robust FastAPI webhook handler to receive messages, process them asynchronously via Celery workers, and send responses.</li> </ul> <h2 id="implementation-details">Implementation Details</h2> <p>The core of the system is the “Agentic” workflow. Instead of a linear script, the LLM acts as an agent that decides the next step.</p> <p><strong>Tech Stack:</strong></p> <ul> <li> <strong>Backend</strong>: Python, FastAPI, Celery</li> <li> <strong>LLM Ops</strong>: LangChain, LangSmith (for tracing)</li> <li> <strong>Database</strong>: PostgreSQL (User Session State), Weaviate (Knowledge Base)</li> <li> <strong>Messaging</strong>: Twilio WhatsApp API</li> </ul> <p><strong>Context Management:</strong> To handle the stateless nature of HTTP webhooks, we implemented a Redis-backed session manager that retrieves the last <code class="language-plaintext highlighter-rouge">k</code> turns of conversation for every incoming message, allowing the user to say “What about the second one?” and have the bot understand they are referring to the second product listed in the previous message.</p> <h2 id="challenges--solutions">Challenges &amp; Solutions</h2> <ul> <li> <strong>Challenge</strong>: WhatsApp enforces a strict 24-hour customer service window.</li> <li> <p><strong>Solution</strong>: Implemented a template message re-engagement flow. If a user returns after 24 hours, the bot automatically triggers an approved template message to restart the session.</p> </li> <li> <strong>Challenge</strong>: The LLM would sometimes make up policies (Hallucination).</li> <li> <strong>Solution</strong>: Implemented strict “Grounding” prompts. “Answer solely based on the retrieved context below. If the answer is not in the context, say ‘I’m not sure, let me connect you with a human.’”</li> </ul> <h2 id="results">Results</h2> <ul> <li> <strong>Deflection Rate</strong>: Successfully automated 65% of incoming L1 support queries.</li> <li> <strong>CSAT</strong>: Verified Customer Satisfaction Score (CSAT) increased from 3.8/5 to 4.6/5.</li> <li> <strong>Response Time</strong>: Reduced median first response time from 45 minutes (human) to &lt;5 seconds (bot).</li> </ul> <h2 id="future-work">Future Work</h2> <ul> <li> <strong>Multimodal Support</strong>: Adding the ability for users to send images (e.g., of a damaged product) which the bot can analyze using GPT-4 Vision.</li> <li> <strong>Voice Support</strong>: Allowing users to send voice notes which are transcribed (Whisper) and processed textually.</li> </ul> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2026 Adarsh Nair. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/blog/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/blog/assets/js/masonry.js?v=a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/blog/assets/js/zoom.js?v=85ddb88934d28b74e78031fd54cf8308"></script> <script src="/blog/assets/js/no_defer.js?v=2781658a0a2b13ed609542042a859126"></script> <script defer src="/blog/assets/js/common.js?v=c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/blog/assets/js/copy_code.js?v=c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/blog/assets/js/jupyter_new_tab.js?v=d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/blog/assets/js/mathjax-setup.js?v=a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/blog/assets/js/progress-bar.js?v=2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/blog/assets/js/vanilla-back-to-top.min.js?v=f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/blog/assets/js/search/ninja-keys.min.js?v=a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/blog/assets/js/search-setup.js?v=6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/blog/assets/js/search-data.js"></script> <script src="/blog/assets/js/shortcut-key.js?v=ccc841c459bfc0e64c1c2b5acd10df02"></script> </body> </html>